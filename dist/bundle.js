!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t){e.exports={VirtualKeyboardInput:class{constructor(e){this.textArea=e}focus(e=this.textArea.selectionStart){setTimeout(()=>{this.textArea.focus(),this.textArea.selectionStart=e,this.textArea.selectionEnd=e},0)}insert(e){const t=this.textArea.selectionStart,i=this.textArea.selectionEnd;this.textArea.value=this.textArea.value.substring(0,t)+e+this.textArea.value.substring(i),this.focus(t+1)}set value(e){this.textArea.value=e}get value(){return this.textArea.value}get end(){return this.textArea.selectionEnd}get start(){return this.textArea.selectionStart}}}},function(e,t,i){let{arrayOfButtonKeys:n,keyState:a}=i(2),{getChar:l,getType:s,getKeyModule:o,getKeyButton:r}=i(5),{VirtualKeyboardInput:u}=i(0),c=i(6);window.localStorage.getItem("virtualKeyBoardLang")||window.localStorage.setItem("virtualKeyBoardLang","en");const d=document.querySelector("body"),f=document.createElement("div");f.className="keyboard",d.appendChild(f);const y=document.createElement("textarea");y.className=c.textArea,y.id="kbText",y.autofocus=!0,y.rows=10;const h=new u(y);f.appendChild(y);const g=document.createElement("div");g.className=c.keyboardPanel,g.addEventListener("click",e=>{let{keyDom:t,key:i}=r(e.target,c.button,n);t&&(i.isClick&&i.func(t,h),a.alt&&(a.shift||a.shiftRight)&&(a.alt=!1,a.shift=!1,a.shiftRight=!1,document.querySelectorAll("div[key^=Shift]").forEach(e=>e.classList.remove(c.buttonPressed)),document.querySelectorAll("div[key=AltLeft]").forEach(e=>e.classList.remove(c.buttonPressed)),b()))}),g.addEventListener("mousedown",e=>{let{keyDom:t,key:i}=r(e.target,c.button,n);if(t&&(t.classList.add(c.buttonPressed),"number"===s(i)||"letter"===s(i)||"functional"===s(i)&&!i.isClick)){let e,n=!1,s=!1;i.func?i.func(h):h.insert(l(a,i)),e=setTimeout((function t(){i.func?i.func(h):h.insert(l(a,i)),e=setTimeout(t,50)}),500);let o=()=>{clearTimeout(e),n=!0,s&&t.classList.remove(c.buttonPressed),t.removeEventListener("mouseup",o)},r=()=>{clearTimeout(e),n=!0,s&&t.classList.remove(c.buttonPressed),t.removeEventListener("mouseleave",r)},u=()=>{s=!0,n&&t.classList.remove(c.buttonPressed),t.removeEventListener("animationend",u)};t.addEventListener("mouseup",o),t.addEventListener("mouseleave",r),t.addEventListener("animationend",u)}}),f.appendChild(g),n.forEach(e=>{const t=document.createElement("div");t.className=c.keyboardLine,g.appendChild(t),e.forEach(e=>{const i=document.createElement("div");i.className=c.button,i.setAttribute("key",e.code);const n=document.createElement("div");n.className=c.buttonTextMain,"letter"!==s(e)&&"functional"!==s(e)||i.classList.add(c.buttonSingle),i.appendChild(n),n.innerText=l(a,e,"initial");const o=document.createElement("div");o.className=c.buttonTextShifted,i.appendChild(o),"number"===s(e)&&(o.innerText=l(a,e,"shifted")),"functional"===s(e)&&(i.classList.add(`${c.buttonTextMain}_${e.initial.toLowerCase().replace(" ","-")}`),"Space"===e.initial&&(i.innerText="")),t.appendChild(i)})});const p=document.createElement("div");function b(){window.localStorage.setItem("virtualKeyBoardLang","ru"===window.localStorage.getItem("virtualKeyBoardLang")?"en":"ru"),[...document.querySelectorAll(`.${c.keyboardPanel} > .${c.keyboardLine}`)].forEach((e,t)=>{e.querySelectorAll("."+c.button).forEach((e,i)=>{const o=n[t][i];if("number"===s(o)||"letter"===s(o)){if(e.classList.forEach(t=>{t!==c.button&&e.classList.remove(t)}),e.querySelector("."+c.buttonTextMain).innerText=l(a,o,"initial"),"number"===s(o)){e.querySelector("."+c.buttonTextShifted).innerText=l(a,o,"shifted")}else e.classList.add(c.buttonSingle)}})})}p.innerText="To change layout use Shift + Left Alt (developed on Windows OS)",p.className=c.keyboardMessage,f.appendChild(p),document.addEventListener("keydown",e=>{const t=document.querySelector(`div[key=${e.code}]`);if(t){if("CapsLock"===e.code){const e=document.querySelector('div[key="CapsLock"');e.classList.contains(c.buttonPressed)?(e.classList.remove(c.buttonPressed),a.caps=!1):(e.classList.add(c.buttonPressed),a.caps=!0)}else t.classList.add(c.buttonPressed);("Alt"===e.key||"AltGraph"===e.key||"Shift"===e.key)&&e.shiftKey&&e.altKey&&b(),"Tab"===e.code?(e.preventDefault(),h.insert("\t")):"AltLeft"!==e.code&&"AltRight"!==e.code||e.preventDefault();let i=o(n,e.code);if("number"===s(i)||"letter"===s(i)){e.preventDefault();let t="number"===s(i)?e.shiftKey:e.shiftKey||a.caps;h.insert(l(a,i,t?"shifted":"initial"))}}}),document.addEventListener("keyup",e=>{const t=document.querySelector(`div[key=${e.code}]`);t&&"CapsLock"!==e.code&&t.classList.remove(c.buttonPressed)}),document.addEventListener("click",e=>{e.target.classList.contains(c.button)||e.target.parentElement&&e.target.parentElement.classList.contains(c.button)||h.focus()})},function(e,t,i){let n=i(3);const a=[];a.push([{languages:{ru:{type:"letter",initial:"ё",shifted:"Ё"},en:{type:"number",initial:"`",shifted:"~"}},code:"Backquote"},{type:"number",initial:"1",shifted:"!",code:"Digit1"},{type:"number",languages:{ru:{initial:"2",shifted:'""'},en:{initial:"2",shifted:"@"}},code:"Digit2"},{type:"number",languages:{ru:{initial:"3",shifted:"№"},en:{initial:"3",shifted:"#"}},code:"Digit3"},{type:"number",languages:{ru:{initial:"4",shifted:";"},en:{initial:"4",shifted:"$"}},code:"Digit4"},{type:"number",initial:"5",shifted:"%",code:"Digit5"},{type:"number",languages:{ru:{initial:"6",shifted:":"},en:{initial:"6",shifted:"^"}},code:"Digit6"},{type:"number",languages:{ru:{initial:"7",shifted:"?"},en:{initial:"7",shifted:"&"}},code:"Digit7"},{type:"number",initial:"8",shifted:"*",code:"Digit8"},{type:"number",initial:"9",shifted:"(",code:"Digit9"},{type:"number",initial:"0",shifted:")",code:"Digit0"},{type:"number",languages:{ru:{initial:"-",shifted:"_"},en:{initial:"-",shifted:"_"}},code:"Minus"},{type:"number",initial:"=",shifted:"+",code:"Equal"},{type:"functional",initial:"Backspace",code:"Backspace",func:n.backspace}]),a.push([{type:"functional",initial:"Tab",func:e=>n.insert("\t",e),code:"Tab"},{type:"letter",languages:{ru:{initial:"й",shifted:"Й"},en:{initial:"q",shifted:"Q"}},code:"KeyQ"},{type:"letter",languages:{ru:{initial:"ц",shifted:"Ц"},en:{initial:"w",shifted:"W"}},code:"KeyW"},{type:"letter",languages:{ru:{initial:"у",shifted:"У"},en:{initial:"e",shifted:"E"}},code:"KeyE"},{type:"letter",languages:{ru:{initial:"к",shifted:"К"},en:{initial:"r",shifted:"R"}},code:"KeyR"},{type:"letter",languages:{ru:{initial:"е",shifted:"Е"},en:{initial:"t",shifted:"T"}},code:"KeyT"},{type:"letter",languages:{ru:{initial:"н",shifted:"Н"},en:{initial:"y",shifted:"Y"}},code:"KeyY"},{type:"letter",languages:{ru:{initial:"г",shifted:"Г"},en:{initial:"u",shifted:"U"}},code:"KeyU"},{type:"letter",languages:{ru:{initial:"ш",shifted:"Ш"},en:{initial:"i",shifted:"I"}},code:"KeyI"},{type:"letter",languages:{ru:{initial:"щ",shifted:"Щ"},en:{initial:"o",shifted:"O"}},code:"KeyO"},{type:"letter",languages:{ru:{initial:"з",shifted:"З"},en:{initial:"p",shifted:"P"}},code:"KeyP"},{languages:{ru:{type:"letter",initial:"х",shifted:"Х"},en:{type:"number",initial:"[",shifted:"{"}},code:"BracketLeft"},{languages:{ru:{type:"letter",initial:"ъ",shifted:"Ъ"},en:{type:"number",initial:"]",shifted:"}"}},code:"BracketRight"},{type:"number",languages:{ru:{initial:"\\",shifted:"/"},en:{initial:"\\",shifted:"|"}},code:"Backslash"},{type:"functional",initial:"Delete",func:n.del,code:"Delete"}]),a.push([{type:"functional",initial:"Caps Lock",isClick:!0,func:(e,t)=>n.functionalKey(e,"caps",t),code:"CapsLock"},{type:"letter",languages:{ru:{initial:"ф",shifted:"Ф"},en:{initial:"a",shifted:"A"}},code:"KeyA"},{type:"letter",languages:{ru:{initial:"ы",shifted:"Ы"},en:{initial:"s",shifted:"S"}},code:"KeyS"},{type:"letter",languages:{ru:{initial:"в",shifted:"В"},en:{initial:"d",shifted:"D"}},code:"KeyD"},{type:"letter",languages:{ru:{initial:"а",shifted:"А"},en:{initial:"f",shifted:"F"}},code:"KeyF"},{type:"letter",languages:{ru:{initial:"п",shifted:"П"},en:{initial:"g",shifted:"G"}},code:"KeyG"},{type:"letter",languages:{ru:{initial:"р",shifted:"Р"},en:{initial:"h",shifted:"H"}},code:"KeyH"},{type:"letter",languages:{ru:{initial:"о",shifted:"О"},en:{initial:"j",shifted:"J"}},code:"KeyJ"},{type:"letter",languages:{ru:{initial:"л",shifted:"Л"},en:{initial:"k",shifted:"K"}},code:"KeyK"},{type:"letter",languages:{ru:{initial:"д",shifted:"Д"},en:{initial:"l",shifted:"L"}},code:"KeyL"},{languages:{ru:{type:"letter",initial:"ж",shifted:"Ж"},en:{type:"number",initial:";",shifted:":"}},code:"Semicolon"},{languages:{ru:{type:"letter",initial:"э",shifted:"Э"},en:{type:"number",initial:"'",shifted:'"'}},code:"Quote"},{type:"functional",initial:"Enter",func:e=>n.insert("\n",e),code:"Enter"}]),a.push([{type:"functional",initial:"Shift",isClick:!0,func:(e,t)=>n.functionalKey(e,"shift",t),code:"ShiftLeft"},{type:"letter",languages:{ru:{initial:"я",shifted:"Я"},en:{initial:"z",shifted:"Z"}},code:"KeyZ"},{type:"letter",languages:{ru:{initial:"ч",shifted:"Ч"},en:{initial:"x",shifted:"X"}},code:"KeyX"},{type:"letter",languages:{ru:{initial:"с",shifted:"С"},en:{initial:"c",shifted:"C"}},code:"KeyC"},{type:"letter",languages:{ru:{initial:"м",shifted:"М"},en:{initial:"v",shifted:"V"}},code:"KeyV"},{type:"letter",languages:{ru:{initial:"и",shifted:"И"},en:{initial:"b",shifted:"B"}},code:"KeyB"},{type:"letter",languages:{ru:{initial:"т",shifted:"Т"},en:{initial:"n",shifted:"N"}},code:"KeyN"},{type:"letter",languages:{ru:{initial:"ь",shifted:"Ь"},en:{initial:"m",shifted:"M"}},code:"KeyM"},{languages:{ru:{type:"letter",initial:"б",shifted:"Б"},en:{type:"number",initial:",",shifted:"<"}},code:"Comma"},{languages:{ru:{type:"letter",initial:"ю",shifted:"Ю"},en:{type:"number",initial:".",shifted:">"}},code:"Period"},{type:"number",languages:{ru:{initial:".",shifted:","},en:{initial:"/",shifted:"?"}},code:"Slash"},{type:"functional",initial:"↑",func:n.arrowUp,code:"ArrowUp"},{type:"functional",initial:"Shift",isClick:!0,func:(e,t)=>n.functionalKey(e,"shiftRight",t),code:"ShiftRight"}]),a.push([{type:"functional",initial:"Ctrl",isClick:!0,func:(e,t)=>n.functionalKey(e,"ctrl",t),code:"ControlLeft"},{type:"functional",initial:"Win",isClick:!0,func:(e,t)=>n.functionalKey(e,"windows",t),code:"MetaLeft"},{type:"functional",initial:"Alt",isClick:!0,func:(e,t)=>n.functionalKey(e,"alt",t),code:"AltLeft"},{type:"functional",initial:"Space",func:e=>n.insert(" ",e),code:"Space"},{type:"functional",initial:"Alt",isClick:!0,func:(e,t)=>n.functionalKey(e,"altRight",t),code:"AltRight"},{type:"functional",initial:"←",func:n.arrowLeft,code:"ArrowLeft"},{type:"functional",initial:"↓",func:n.arrowDown,code:"ArrowDown"},{type:"functional",initial:"→",func:n.arrowRight,code:"ArrowRight"},{type:"functional",initial:"Ctrl",isClick:!0,func:(e,t)=>n.functionalKey(e,"ctrlRight",t),code:"ControlRight"}]),e.exports={arrayOfButtonKeys:a,keyState:n.keyState}},function(e,t,i){let n,a=i(4),{VirtualKeyboardInput:l}=i(0);e.exports={initialize:function(e){n=new l(e)},backspace:function(e=n){if(!(e instanceof l))return void console.error("wrong type of input "+e);let t=e.start;const i=e.end;e.value=e.value.substring(0,t-1)+e.value.substring(i),t>0&&(t-=1),e.focus(t)},insert:function(e,t=n){t.insert(e)},del:function(e=n){const t=e.start,i=e.end;e.value=e.value.substring(0,t)+e.value.substring(i+1),e.focus(t)},functionalKey:function(e,t,i=n){a[t]=!a[t],a[t]?e.classList.add("keyboard-line__button_pressed"):e.classList.remove("keyboard-line__button_pressed"),i.focus()},arrowUp:function(e=n){const t=e.start;let i=e.value;const a=i.substring(0,t).lastIndexOf("\n")+1,l=t-a;i=i.substring(0,a-1);const s=i.lastIndexOf("\n")+1,o=a-s-1;let r=s+(l>o?o:l);r<0&&(r=0),e.focus(r)},arrowLeft:function(e=n){const t=e.start;e.focus(t-1)},arrowDown:function(e=n){const t=e.start,i=e.value,a=t-(i.substring(0,t).lastIndexOf("\n")+1);let l=i.indexOf("\n",t)+1;l<1&&(l=i.length);let s=i.indexOf("\n",l)-l;s<0&&(s=i.length-l);let o=l+(a>s?s:a);o<0&&(o=i.length),e.focus(o)},arrowRight:function(e=n){const t=e.start;e.focus(t+1)},keyState:a}},function(e,t){e.exports={shift:!1,shiftRight:!1,ctrl:!1,ctrlRight:!1,alt:!1,altRight:!1,windows:!1,caps:!1}},function(e,t){function i(e){return e.type?e.type:e.languages[window.localStorage.getItem("virtualKeyBoardLang")].type}function n(e,t){return[].concat(...e).find(e=>e.code===t)}e.exports={getType:i,getChar:function(e,t,n){let a="number"===i(t)?e.shift:e.shift||e.caps;return n&&(a="shifted"===n),t.initial?a?t.shifted:t.initial:a?t.languages[window.localStorage.getItem("virtualKeyBoardLang")].shifted:t.languages[window.localStorage.getItem("virtualKeyBoardLang")].initial},getKeyModule:n,getKeyButton:function(e,t,i){return e.classList.contains(t)?{keyDom:e,key:n(i,e.getAttribute("key"))}:e.parentElement.classList.contains(t)?{keyDom:e.parentElement,key:n(i,e.parentElement.getAttribute("key"))}:{keyDom:void 0,key:void 0}}}},function(e,t){e.exports={button:"keyboard-line__button",buttonPressed:"keyboard-line__button_pressed",buttonSingle:"keyboard-line__button_single",buttonTextShifted:"keyboard-line__button-shifted-text",buttonTextMain:"keyboard-line__button-main-text",textArea:"keyboard__text-area",keyboardPanel:"keyboard-panel",keyboardLine:"keyboard-line",keyboardMessage:"keyboard__message"}}]);