!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t){e.exports={VirtualKeyboardInput:class{constructor(e){this.textArea=e}focus(e=this.textArea.selectionStart){setTimeout(()=>{this.textArea.focus(),this.textArea.selectionStart=e,this.textArea.selectionEnd=e},0)}insert(e){const t=this.textArea.selectionStart,i=this.textArea.selectionEnd;this.textArea.value=this.textArea.value.substring(0,t)+e+this.textArea.value.substring(i),this.focus(t+1)}set value(e){this.textArea.value=e}setValue(e){this.value=e}get value(){return this.textArea.value}get end(){return this.textArea.selectionEnd}get start(){return this.textArea.selectionStart}}}},function(e,t,i){const{arrayOfButtonKeys:n}=i(2),{VirtualKeyboard:a}=i(4),s=document.querySelector("body");new a(document,s).init(n)},function(e,t,i){const n=i(3),a=[];a.push([{languages:{ru:{type:"letter",initial:"ё",shifted:"Ё"},en:{type:"number",initial:"`",shifted:"~"}},code:"Backquote"},{type:"number",initial:"1",shifted:"!",code:"Digit1"},{type:"number",languages:{ru:{initial:"2",shifted:'""'},en:{initial:"2",shifted:"@"}},code:"Digit2"},{type:"number",languages:{ru:{initial:"3",shifted:"№"},en:{initial:"3",shifted:"#"}},code:"Digit3"},{type:"number",languages:{ru:{initial:"4",shifted:";"},en:{initial:"4",shifted:"$"}},code:"Digit4"},{type:"number",initial:"5",shifted:"%",code:"Digit5"},{type:"number",languages:{ru:{initial:"6",shifted:":"},en:{initial:"6",shifted:"^"}},code:"Digit6"},{type:"number",languages:{ru:{initial:"7",shifted:"?"},en:{initial:"7",shifted:"&"}},code:"Digit7"},{type:"number",initial:"8",shifted:"*",code:"Digit8"},{type:"number",initial:"9",shifted:"(",code:"Digit9"},{type:"number",initial:"0",shifted:")",code:"Digit0"},{type:"number",languages:{ru:{initial:"-",shifted:"_"},en:{initial:"-",shifted:"_"}},code:"Minus"},{type:"number",initial:"=",shifted:"+",code:"Equal"},{type:"functional",initial:"Backspace",code:"Backspace",func:n.backspace}]),a.push([{type:"functional",initial:"Tab",func:e=>n.insert("\t",e),code:"Tab"},{type:"letter",languages:{ru:{initial:"й",shifted:"Й"},en:{initial:"q",shifted:"Q"}},code:"KeyQ"},{type:"letter",languages:{ru:{initial:"ц",shifted:"Ц"},en:{initial:"w",shifted:"W"}},code:"KeyW"},{type:"letter",languages:{ru:{initial:"у",shifted:"У"},en:{initial:"e",shifted:"E"}},code:"KeyE"},{type:"letter",languages:{ru:{initial:"к",shifted:"К"},en:{initial:"r",shifted:"R"}},code:"KeyR"},{type:"letter",languages:{ru:{initial:"е",shifted:"Е"},en:{initial:"t",shifted:"T"}},code:"KeyT"},{type:"letter",languages:{ru:{initial:"н",shifted:"Н"},en:{initial:"y",shifted:"Y"}},code:"KeyY"},{type:"letter",languages:{ru:{initial:"г",shifted:"Г"},en:{initial:"u",shifted:"U"}},code:"KeyU"},{type:"letter",languages:{ru:{initial:"ш",shifted:"Ш"},en:{initial:"i",shifted:"I"}},code:"KeyI"},{type:"letter",languages:{ru:{initial:"щ",shifted:"Щ"},en:{initial:"o",shifted:"O"}},code:"KeyO"},{type:"letter",languages:{ru:{initial:"з",shifted:"З"},en:{initial:"p",shifted:"P"}},code:"KeyP"},{languages:{ru:{type:"letter",initial:"х",shifted:"Х"},en:{type:"number",initial:"[",shifted:"{"}},code:"BracketLeft"},{languages:{ru:{type:"letter",initial:"ъ",shifted:"Ъ"},en:{type:"number",initial:"]",shifted:"}"}},code:"BracketRight"},{type:"number",languages:{ru:{initial:"\\",shifted:"/"},en:{initial:"\\",shifted:"|"}},code:"Backslash"},{type:"functional",initial:"Delete",func:n.del,code:"Delete"}]),a.push([{type:"functional",initial:"Caps Lock",isClick:!0,func:(e,t,i)=>n.functionalKey(e,t,"caps",i),code:"CapsLock"},{type:"letter",languages:{ru:{initial:"ф",shifted:"Ф"},en:{initial:"a",shifted:"A"}},code:"KeyA"},{type:"letter",languages:{ru:{initial:"ы",shifted:"Ы"},en:{initial:"s",shifted:"S"}},code:"KeyS"},{type:"letter",languages:{ru:{initial:"в",shifted:"В"},en:{initial:"d",shifted:"D"}},code:"KeyD"},{type:"letter",languages:{ru:{initial:"а",shifted:"А"},en:{initial:"f",shifted:"F"}},code:"KeyF"},{type:"letter",languages:{ru:{initial:"п",shifted:"П"},en:{initial:"g",shifted:"G"}},code:"KeyG"},{type:"letter",languages:{ru:{initial:"р",shifted:"Р"},en:{initial:"h",shifted:"H"}},code:"KeyH"},{type:"letter",languages:{ru:{initial:"о",shifted:"О"},en:{initial:"j",shifted:"J"}},code:"KeyJ"},{type:"letter",languages:{ru:{initial:"л",shifted:"Л"},en:{initial:"k",shifted:"K"}},code:"KeyK"},{type:"letter",languages:{ru:{initial:"д",shifted:"Д"},en:{initial:"l",shifted:"L"}},code:"KeyL"},{languages:{ru:{type:"letter",initial:"ж",shifted:"Ж"},en:{type:"number",initial:";",shifted:":"}},code:"Semicolon"},{languages:{ru:{type:"letter",initial:"э",shifted:"Э"},en:{type:"number",initial:"'",shifted:'"'}},code:"Quote"},{type:"functional",initial:"Enter",func:e=>n.insert("\n",e),code:"Enter"}]),a.push([{type:"functional",initial:"Shift",isClick:!0,func:(e,t,i)=>n.functionalKey(e,t,"shift",i),code:"ShiftLeft"},{type:"letter",languages:{ru:{initial:"я",shifted:"Я"},en:{initial:"z",shifted:"Z"}},code:"KeyZ"},{type:"letter",languages:{ru:{initial:"ч",shifted:"Ч"},en:{initial:"x",shifted:"X"}},code:"KeyX"},{type:"letter",languages:{ru:{initial:"с",shifted:"С"},en:{initial:"c",shifted:"C"}},code:"KeyC"},{type:"letter",languages:{ru:{initial:"м",shifted:"М"},en:{initial:"v",shifted:"V"}},code:"KeyV"},{type:"letter",languages:{ru:{initial:"и",shifted:"И"},en:{initial:"b",shifted:"B"}},code:"KeyB"},{type:"letter",languages:{ru:{initial:"т",shifted:"Т"},en:{initial:"n",shifted:"N"}},code:"KeyN"},{type:"letter",languages:{ru:{initial:"ь",shifted:"Ь"},en:{initial:"m",shifted:"M"}},code:"KeyM"},{languages:{ru:{type:"letter",initial:"б",shifted:"Б"},en:{type:"number",initial:",",shifted:"<"}},code:"Comma"},{languages:{ru:{type:"letter",initial:"ю",shifted:"Ю"},en:{type:"number",initial:".",shifted:">"}},code:"Period"},{type:"number",languages:{ru:{initial:".",shifted:","},en:{initial:"/",shifted:"?"}},code:"Slash"},{type:"functional",initial:"↑",func:n.arrowUp,code:"ArrowUp"},{type:"functional",initial:"Shift",isClick:!0,func:(e,t,i)=>n.functionalKey(e,t,"shiftRight",i),code:"ShiftRight"}]),a.push([{type:"functional",initial:"Ctrl",isClick:!0,func:(e,t,i)=>n.functionalKey(e,t,"ctrl",i),code:"ControlLeft"},{type:"functional",initial:"Win",isClick:!0,func:(e,t)=>n.functionalKey(e,"windows",t),code:"MetaLeft"},{type:"functional",initial:"Alt",isClick:!0,func:(e,t,i)=>n.functionalKey(e,t,"alt",i),code:"AltLeft"},{type:"functional",initial:"Space",func:e=>n.insert(" ",e),code:"Space"},{type:"functional",initial:"Alt",isClick:!0,func:(e,t,i)=>n.functionalKey(e,t,"altRight",i),code:"AltRight"},{type:"functional",initial:"←",func:n.arrowLeft,code:"ArrowLeft"},{type:"functional",initial:"↓",func:n.arrowDown,code:"ArrowDown"},{type:"functional",initial:"→",func:n.arrowRight,code:"ArrowRight"},{type:"functional",initial:"Ctrl",isClick:!0,func:(e,t,i)=>n.functionalKey(e,t,"ctrlRight",i),code:"ControlRight"}]),e.exports={arrayOfButtonKeys:a}},function(e,t,i){const{VirtualKeyboardInput:n}=i(0);let a;e.exports={initialize:function(e){a=new n(e)},backspace:function(e=a){if(!(e instanceof n))return;let t=e.start;const i=e.end;e.setValue(e.value.substring(0,t-1)+e.value.substring(i)),t>0&&(t-=1),e.focus(t)},insert:function(e,t=a){t.insert(e)},del:function(e=a){const t=e.start,i=e.end;e.setValue(e.value.substring(0,t)+e.value.substring(i+1)),e.focus(t)},functionalKey:function(e,t,i,n=a){let s={};s[i]=!e.getState(i),e.setState(s),e.getState(i)?t.classList.add("keyboard-line__button_pressed"):t.classList.remove("keyboard-line__button_pressed"),n.focus()},arrowUp:function(e=a){const t=e.start;let{value:i}=e;const n=i.substring(0,t).lastIndexOf("\n")+1,s=t-n;i=i.substring(0,n-1);const l=i.lastIndexOf("\n")+1,o=n-l-1;let r=l+(s>o?o:s);r<0&&(r=0),e.focus(r)},arrowLeft:function(e=a){const t=e.start;e.focus(t-1)},arrowDown:function(e=a){const t=e.start,{value:i}=e,n=t-(i.substring(0,t).lastIndexOf("\n")+1);let s=i.indexOf("\n",t)+1;s<1&&(s=i.length);let l=i.indexOf("\n",s)-s;l<0&&(l=i.length-s);let o=s+(n>l?l:n);o<0&&(o=i.length),e.focus(o)},arrowRight:function(e=a){const t=e.start;e.focus(t+1)}}},function(e,t,i){const{getChar:n,getType:a,getKeyModule:s,getKeyButton:l}=i(5),{VirtualKeyboardInput:o}=i(0),r=i(6);e.exports={VirtualKeyboard:class{constructor(e,t){this.document=e,this.parentNode=t,this.keyState={shift:!1,shiftRight:!1,ctrl:!1,ctrlRight:!1,alt:!1,altRight:!1,windows:!1,caps:!1},window.localStorage.getItem("virtualKeyBoardLang")||window.localStorage.setItem("virtualKeyBoardLang","en"),this.sLanguage=window.localStorage.getItem("virtualKeyBoardLang")}get language(){return this.sLanguage}set language(e){window.localStorage.setItem("virtualKeyBoardLang",e),this.sLanguage=e}getState(e){return this.keyState[e]}setState(e){Object.keys(e).forEach(t=>{this.keyState[t]=e[t]})}createKeyboard(){const e=document.createElement("div");e.className="keyboard",this.parentNode.appendChild(e),this.keyboard=e}createTextArea(){const e=document.createElement("textarea");e.className=r.textArea,e.id="kbText",e.autofocus=!0,e.rows=10,this.keyboardInput=new o(e),this.keyboard.appendChild(e)}createKeyboardPanel(){const e=document.createElement("div");return e.className=r.keyboardPanel,this.keyboard.appendChild(e),e}onKeyClick(e){e.addEventListener("click",e=>{const{keyDom:t,key:i}=l(e.target,r.button,this.arrayOfButtonKeys);t&&(i.isClick&&i.func(this,t,this.keyboardInput),this.keyState.alt&&(this.keyState.shift||this.keyState.shiftRight)&&(this.keyState.alt=!1,this.keyState.shift=!1,this.keyState.shiftRight=!1,document.querySelectorAll("div[key^=Shift]").forEach(e=>e.classList.remove(r.buttonPressed)),document.querySelectorAll("div[key=AltLeft]").forEach(e=>e.classList.remove(r.buttonPressed)),this.changeLayout()))})}onKeyMouseDown(e){e.addEventListener("mousedown",e=>{const{keyDom:t,key:i}=l(e.target,r.button,this.arrayOfButtonKeys);if(t&&(t.classList.add(r.buttonPressed),"number"===a(i,this.language)||"letter"===a(i,this.language)||"functional"===a(i,this.language)&&!i.isClick)){let e,a=!1,s=!1;i.func?i.func(this.keyboardInput):this.keyboardInput.insert(n(this.keyState,i,this.language));const l=()=>{i.func?i.func(this.keyboardInput):this.keyboardInput.insert(n(this.keyState,i,this.language)),e=setTimeout(l,50)};e=setTimeout(l,500);const o=()=>{clearTimeout(e),a=!0,s&&t.classList.remove(r.buttonPressed),t.removeEventListener("mouseup",o)},u=()=>{clearTimeout(e),a=!0,s&&t.classList.remove(r.buttonPressed),t.removeEventListener("mouseleave",u)},c=()=>{s=!0,a&&t.classList.remove(r.buttonPressed),t.removeEventListener("animationend",c)};t.addEventListener("mouseup",o),t.addEventListener("mouseleave",u),t.addEventListener("animationend",c)}})}createKeyButton(e,t){const i=document.createElement("div");i.className=r.button,i.setAttribute("key",t.code);const s=document.createElement("div");s.className=r.buttonTextMain,"letter"!==a(t,this.language)&&"functional"!==a(t,this.language)||i.classList.add(r.buttonSingle),i.appendChild(s),s.innerText=n(this.keyState,t,this.language,"initial");const l=document.createElement("div");l.className=r.buttonTextShifted,i.appendChild(l),"number"===a(t,this.language)&&(l.innerText=n(this.keyState,t,this.language,"shifted")),"functional"===a(t,this.language)&&(i.classList.add(`${r.buttonTextMain}_${t.initial.toLowerCase().replace(" ","-")}`),"Space"===t.initial&&(i.innerText="")),e.appendChild(i)}createButtonLine(e,t){const i=document.createElement("div");i.className=r.keyboardLine,t.forEach(e=>this.createKeyButton(i,e)),e.appendChild(i)}createKeyboardLines(e){this.arrayOfButtonKeys.forEach(t=>this.createButtonLine(e,t))}createTextMessage(){const e=document.createElement("div");e.innerText="To change layout use Shift + Left Alt (developed on Windows OS)",e.className=r.keyboardMessage,this.keyboard.appendChild(e)}onKeyDown(){this.document.addEventListener("keydown",e=>{const t=this.document.querySelector(`div[key=${e.code}]`);if(t){if("CapsLock"===e.code){const e=this.document.querySelector('div[key="CapsLock"');e.classList.contains(r.buttonPressed)?(e.classList.remove(r.buttonPressed),this.keyState.caps=!1):(e.classList.add(r.buttonPressed),this.keyState.caps=!0)}else t.classList.add(r.buttonPressed);("Alt"===e.key||"AltGraph"===e.key||"Shift"===e.key)&&e.shiftKey&&e.altKey&&this.changeLayout(),"Tab"===e.code?(e.preventDefault(),this.keyboardInput.insert("\t")):"AltLeft"!==e.code&&"AltRight"!==e.code||e.preventDefault();const i=s(this.arrayOfButtonKeys,e.code);if("number"===a(i,this.language)||"letter"===a(i,this.language)){e.preventDefault();const t="number"===a(i,this.language)?e.shiftKey:e.shiftKey||this.keyState.caps;this.keyboardInput.insert(n(this.keyState,i,this.language,t?"shifted":"initial"))}}})}onKeyUp(){this.document.addEventListener("keyup",e=>{const t=this.document.querySelector(`div[key=${e.code}]`);t&&"CapsLock"!==e.code&&t.classList.remove(r.buttonPressed)})}changeLayout(){this.language="ru"===this.language?"en":"ru",[...this.document.querySelectorAll(`.${r.keyboardPanel} > .${r.keyboardLine}`)].forEach((e,t)=>{e.querySelectorAll("."+r.button).forEach((e,i)=>{const s=this.arrayOfButtonKeys[t][i];if("number"===a(s,this.language)||"letter"===a(s,this.language)){if(e.classList.forEach(t=>{t!==r.button&&e.classList.remove(t)}),e.querySelector("."+r.buttonTextMain).innerText=n(this.keyState,s,this.language,"initial"),"number"===a(s,this.language)){e.querySelector("."+r.buttonTextShifted).innerText=n(this.keyState,s,this.language,"shifted")}else e.classList.add(r.buttonSingle)}})})}onClick(){this.document.addEventListener("click",e=>{e.target.classList.contains(r.button)||e.target.parentElement&&e.target.parentElement.classList.contains(r.button)||this.keyboardInput.focus()})}init(e){this.arrayOfButtonKeys=e,this.createKeyboard(),this.createTextArea();const t=this.createKeyboardPanel();this.onKeyClick(t),this.onKeyMouseDown(t),this.createKeyboardLines(t),this.createTextMessage(),this.onKeyDown(),this.onKeyUp(),this.onClick()}}}},function(e,t){function i(e,t){return e.type?e.type:e.languages[t].type}function n(e,t){return[].concat(...e).find(e=>e.code===t)}e.exports={getType:i,getChar:function(e,t,n,a){let s="number"===i(t,n)?e.shift:e.shift||e.caps;return a&&(s="shifted"===a),t.initial?s?t.shifted:t.initial:s?t.languages[n].shifted:t.languages[n].initial},getKeyModule:n,getKeyButton:function(e,t,i){return e.classList.contains(t)?{keyDom:e,key:n(i,e.getAttribute("key"))}:e.parentElement.classList.contains(t)?{keyDom:e.parentElement,key:n(i,e.parentElement.getAttribute("key"))}:{keyDom:void 0,key:void 0}}}},function(e,t){e.exports={button:"keyboard-line__button",buttonPressed:"keyboard-line__button_pressed",buttonSingle:"keyboard-line__button_single",buttonTextShifted:"keyboard-line__button-shifted-text",buttonTextMain:"keyboard-line__button-main-text",textArea:"keyboard__text-area",keyboardPanel:"keyboard-panel",keyboardLine:"keyboard-line",keyboardMessage:"keyboard__message"}}]);